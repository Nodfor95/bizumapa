/*!
 * ====================================================
 * angular colorpicker - v1.0.8 - 2015-10-26
 * https://github.com/zhangbobell/color-picker#readme
 * GitHub: git+https://github.com/zhangbobell/color-picker.git 
 * Copyright (c) 2015 ; Licensed 
 * ====================================================
 */
angular.module("ui.colorpicker",[]).directive("colorPicker",["$compile",function(o){return{restrict:"EA",scope:{setColor:"&"},link:function(e,l,r){var t,c={clearText:"Remover",defaultColor:e.setColor()||r.defaultColor||"#fff",latestText:"Recentes",commonText:"Comuns",commonColor:[["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646"],["#f2f2f2","#808080","#ddd8c2","#c6d9f1","#dbe5f1","#f2dbdb","#eaf1dd","#e5dfec","#daeef3","#fde9d9"],["#d9d9d9","#595959","#c4bc96","#8db3e2","#b8cce4","#e5b8b7","#d6e3bc","#ccc0d9","#b6dde8","#fbd4b4"],["#bfbfbf","#404040","#938953","#548dd4","#95b3d7","#d99594","#c2d69b","#b2a1c7","#92cddc","#fabf8f"],["#a6a6a6","#262626","#4a442a","#17365d","#365f91","#943634","#76923c","#5f497a","#31849b","#e36c0a"],["#7f7f7f","#0d0d0d","#1c1a10","#0f243e","#243f60","#622423","#4e6128","#3f3151","#205867","#974706"]],standardText:"Principais",standardColor:["#c00000","#ff0000","#ffc000","#ffff00","#92d050","#00b050","#00b0f0","#0070c0","#002060","#7030a0"],moreText:"Mais cores.."},i=(1e6*+new Date+Math.floor(1e6*Math.random())).toString(36),n='<div class="colorpicker-container" tabindex="-1" ng-click="keepPickerOpen($event)"><div class="colorpicker-toolbar"><div class="colorpicker-preview" ng-style="{ \'background-color\': hoveredColor }"></div><div class="colorpicker-clear" ng-bind="defaultOptions.clearText" ng-click="selectColorAndClose(setColor() || defaultOptions.defaultColor)"></div></div><div class="colorpicker-title" ng-bind="defaultOptions.latestText" ng-if="latestColor.length > 0"></div><div class="colorpicker-latestcolor colorpicker-colors"><span class="colorpicker-colors-item" ng-repeat="color in latestColor" ng-style="{\'background-color\': color, \'border-color\': color}" ng-click="selectColorAndClose(color)" ng-mouseover="previewColor(color)" ng-mouseleave="previewColor(setColor() || defaultOptions.defaultColor)"></span></div><div class="colorpicker-title" ng-bind="defaultOptions.commonText"></div><div class="colorpicker-commoncolor"><div class="colorpicker-colors colorpicker-colors-line{{$index}}" ng-repeat="line in defaultOptions.commonColor"><span class="colorpicker-colors-item" ng-repeat="color in line" ng-style="{\'background-color\': color, \'border-color\': color}" ng-click="selectColorAndClose(color)" ng-mouseover="previewColor(color)" ng-mouseleave="previewColor(setColor() || defaultOptions.defaultColor)"></span></div></div><div class="colorpicker-title" ng-bind="defaultOptions.standardText"></div><div class="colorpicker-standardcolor colorpicker-colors"><span class="colorpicker-colors-item" ng-repeat="color in defaultOptions.standardColor" ng-style="{\'background-color\': color, \'border-color\': color}" ng-click="selectColorAndClose(color)" ng-mouseover="previewColor(color)" ng-mouseleave="previewColor(setColor() || defaultOptions.defaultColor)"></span></div><div class="colorpicker-title colorpicker-morecolor" ng-if="isSupportNativeColorPicker"><label for="native-color-picker'+i+'" ng-bind="defaultOptions.moreText"></label><input id="native-color-picker'+i+'" class="native-color-picker" type="color" ng-model="nativeColor" ng-change="selectColor(nativeColor);" /></div></div>',s=angular.element,a=s(n),d=angular.isDefined(r.colorpickerPosition)?r.colorpickerPosition:"bottom";function f(){var o=k(l);a.css(o)}function p(o){e.$emit("colorPicked",o),e.hoveredColor=o,function(o){var e=C()||{},l=b();if(l&&l instanceof Array){var r=l.indexOf(o);-1!=r&&l.splice(r,1),l.unshift(o)}else l=[o];l.length>10&&(l=l.slice(0,10));e.latestColor=l,window.localStorage.setItem("ui-color-picker",JSON.stringify(e))}(o),e.latestColor=b()}function u(){a.css("display","none")}function v(o){if(!angular.isDefined(r.disabled)||!r.disabled){o.stopPropagation();var e=k(l);a.css(e),a.css("display","block"),a[0].focus()}}function C(){var o=window.localStorage.getItem("ui-color-picker");if(!o)return null;try{o=JSON.parse(o)}catch(o){return null}return o}function b(){var o=C();return o?o.latestColor:[]}function k(o){var e,l=function(o,e){for(var l=0,r=0,t=0,c=0;o&&!isNaN(o.offsetLeft)&&!isNaN(o.offsetTop);)l+=o.offsetLeft,r+=o.offsetTop,e||"BODY"!==o.tagName?(t+=o.scrollLeft,c+=o.scrollTop):(t+=document.documentElement.scrollLeft||o.scrollLeft,c+=document.documentElement.scrollTop||o.scrollTop),o=o.offsetParent;return{top:r,left:l,scrollX:t,scrollY:c}}(o[0]);return"top"===d?e={top:l.top-147,left:l.left}:"right"===d?e={top:l.top,left:l.left+126}:"bottom"===d?e={top:l.top+o[0].offsetHeight+2,left:l.left}:"left"===d&&(e={top:l.top,left:l.left-150}),{top:e.top+"px",left:e.left+"px"}}e.defaultOptions=c,e.isSupportNativeColorPicker=((t=document.createElement("input")).setAttribute("type","color"),"text"!==t.type),e.latestColor=b(),e.selectColor=p,e.previewColor=function(o){e.hoveredColor=o},e.selectColorAndClose=function(o){p(o),u()},e.keepPickerOpen=function(o){o.stopPropagation()},e.hoveredColor=c.defaultColor,o(a)(e),s(document.body).append(a),l.on("click",v),s(document).on("click",u),e.$on("openColorPicker",v),e.$on("closeColorPicker",u),window.attachEvent?window.attachEvent("onresize",f):window.addEventListener&&window.addEventListener("resize",f)}}}]);